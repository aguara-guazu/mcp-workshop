<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Model Context Protocol (MCP) - Presentación</title>
  <link rel="icon" href="images/favicon.png" type="image/png" />
  <style>
    :root {
      --bg: #1a1a1a;
      --fg: #ffffff;
      --muted: #a0a0a0;
      --muted-2: #666666;
      --panel: rgba(64, 64, 64, 0.35);
      --panel-strong: rgba(64, 64, 64, 0.45);
      --panel-stronger: rgba(64, 64, 64, 0.6);
      --accent: #ff6b35;
      --nav-h: 80px;

      /* Tipografía fluida más conservadora */
      --h1: clamp(1.8rem, 5vw, 3.5rem);
      --h2: clamp(1.4rem, 3.5vw, 2.4rem);
      --h3: clamp(1.1rem, 2vw, 1.4rem);
      --p: clamp(0.9rem, 1.2vw, 1.1rem);
      --p-sm: clamp(0.85rem, 1vw, 1rem);

      /* Espaciados fluidos */
      --gap-sm: clamp(1rem, 2vh, 2rem);
      --gap-md: clamp(1.5rem, 3vh, 3rem);
      --gap-lg: clamp(2rem, 4vh, 4rem);
      --padding-sm: clamp(12px, 2vh, 24px);
      --padding-md: clamp(16px, 2.5vh, 32px);
    }

    /* Reset básico + layout sin scroll */
    html, body { height: 100%; }
    html, body { margin: 0; padding: 0; background: var(--bg); color: var(--fg); overflow: hidden; }
    * { box-sizing: border-box; }

    .presentation-container {
      width: 100vw;
      height: 100vh; /* fallback */
      height: 100dvh; /* evita saltos en móviles */
      background: linear-gradient(rgba(26, 26, 26, 0.85), rgba(26, 26, 26, 0.85)), url('./images/bg_image1.png');
      background-size: cover;
      background-position: center;
      /* background-attachment: fixed;  <-- evita issues en iOS al no haber scroll */
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      position: relative;
      display: flex;
      flex-direction: column;
    }

    /* Capa del GIF animado que se desvanecerá */
    .presentation-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(rgba(26, 26, 26, 0.85), rgba(26, 26, 26, 0.85)), url('./images/bg_image1_animated.gif');
      background-size: cover;
      background-position: center;
      opacity: 1;
      transition: opacity 2s ease-out;
      pointer-events: none;
      z-index: 0;
    }

    /* Cuando el GIF termine, hacer fade out del GIF animado */
    .presentation-container.gif-ended::before {
      opacity: 0;
    }

    /* Asegurar que el contenido esté por encima del fondo */
    .slide-wrapper {
      position: relative;
      z-index: 1;
      width: 100%;
      height: calc(100% - var(--nav-h));
      display: grid;
      place-items: center;
      transition: opacity 0.3s ease-in-out;
      padding: 0; /* evita desbordes */
    }
    .slide-wrapper.animating { opacity: 0; }

    .slide-content {
      width: 90%;
      max-width: 1200px;
      height: 90%;
      padding: min(60px, 6vh);
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
      /* FIT SIN SCROLL */
      transform-origin: top center;
      overflow: hidden; /* no scroll interno */
    }

    .slide { display: none; }
    .slide.active {
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: min(3vh, 40px);
    }

    /* Portada */
    .portada { text-align: center; align-items: center; }
    .hero-section { animation: fadeInUp 0.6s ease-out; }
    .main-title { font-size: var(--h1); font-weight: 800; margin: 0 0 12px 0; line-height: 1.1; position: relative; z-index: 1; }
    .highlight-text { position: relative; display: inline-block; z-index: 1; margin-right: 1rem; padding-right: 0.5rem; }
    .highlight-text::after {
      content: '';
      position: absolute; left: -10px; right: -10px; top: 50%; height: 1em; background: var(--accent); opacity: 0.5; transform: translateY(-50%) rotate(-1deg); z-index: -1;
    }
    .subtitle { font-size: var(--h2); font-weight: 300; margin: 0 0 24px 0; color: var(--muted); }
    .tagline { font-size: clamp(1.1rem, 1.2vw, 1.4rem); max-width: 800px; margin: 24px auto 0; }
    .author-info { font-size: 1rem; color: var(--muted-2); margin-top: 28px; }

    /* Títulos y texto base */
    .slide-title {
      font-size: clamp(1.6rem, 3.5vw, 2.4rem);
      margin: 0 0 var(--gap-sm);
      text-align: center;
    }
    .big-text { font-size: var(--p); line-height: 1.5; max-width: 1000px; margin: 0 auto; color: var(--fg); }

    /* Grillas y bloques */
    .content-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--gap-sm);
      max-width: 1000px;
      margin: 0 auto;
    }
    .problem-point {
      padding: var(--padding-sm);
      border-left: 4px solid var(--accent);
      background: var(--panel);
      transition: transform 0.3s ease;
    }
    .problem-point h3, .problem-point h4 {
      font-size: var(--h3);
      margin: 0 0 var(--gap-sm);
      color: var(--fg);
    }
    .problem-point p {
      font-size: var(--p);
      line-height: 1.5;
      color: var(--muted);
      margin: 0 0 var(--gap-sm);
    }

    .definition-section {
      display: flex;
      flex-direction: column;
      gap: var(--gap-md);
    }
    .main-definition { text-align: center; }

    .key-benefits {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--gap-sm);
      margin-top: var(--gap-sm);
    }
    .benefit {
      display: flex;
      align-items: center;
      gap: var(--gap-sm);
      padding: var(--padding-sm);
      border-radius: 8px;
      background: var(--panel-strong);
      transition: transform 0.2s ease, background 0.2s ease;
      flex-direction: column;
    }
    .benefit:hover { background: var(--panel-stronger); transform: translateY(-2px); }
    .benefit-icon { font-size: clamp(1.5rem, 2.5vw, 2rem); min-width: 40px; }
    .benefit-text h3 { font-size: var(--h3); margin: 0 0 4px 0; }
    .benefit-text p { font-size: var(--p-sm); color: var(--muted); margin: 0; line-height: 1.3; }

    .highlighter { position: relative; display: inline; padding: 2px 4px; background: rgba(255, 107, 53, 0.5); }

    /* Diagramas / imágenes - Centrado vertical mejorado */
    .diagram-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
      padding: var(--padding-sm);
    }
    .diagram-container img {
      height: auto;
        max-width: 160%;
      display: block;
      object-fit: contain;
    }

    #slide-11-use-cases p {
        text-align: left;
        padding-left: 35%;
    }
    .text-padding{
        text-align: left;
        padding-left: 40%;
    }
    /* Slide 8 específico - Ciclo de Vida con espaciados fluidos */
    #slide-7 .content-grid {
      display: grid !important;
      grid-template-columns: 1.2fr 0.8fr !important;
      gap: var(--gap-md) !important;
      align-items: start !important;
      margin-top: var(--gap-sm) !important;
    }

    #slide-7 .problem-point {
      padding: var(--padding-sm) !important;
    }

    #slide-7 .diagram-container {
      height: auto !important;
      min-height: 300px !important;
    }

    /* Navegación */
    .navigation {
      position: absolute; left: 0; right: 0; bottom: 0; height: var(--nav-h);
      background: rgba(26, 26, 26, 0.95); backdrop-filter: blur(10px);
      display: flex; align-items: center; justify-content: space-between; padding: 0 24px; border-top: 1px solid #404040;
    }
    .nav-dots { display: flex; gap: 10px; flex-wrap: wrap; max-width: 60vw; align-items: center; }
    .nav-dot { width: 12px; height: 12px; border-radius: 50%; border: 2px solid var(--muted-2); background: transparent; cursor: pointer; transition: all 0.2s ease; }
    .nav-dot:hover { border-color: var(--accent); }
    .nav-dot.active { background: var(--accent); border-color: var(--accent); }
    .nav-controls { display: flex; align-items: center; gap: 14px; }
    .nav-btn, .fullscreen-btn {
      background: transparent; border: 1px solid var(--muted-2); color: var(--fg);
      padding: 8px 14px; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-size: 0.92rem;
    }
    .nav-btn:hover:not(:disabled), .fullscreen-btn:hover { border-color: var(--accent); color: var(--accent); }
    .nav-btn:disabled { opacity: 0.35; cursor: not-allowed; }
    .slide-counter { color: var(--muted); font-size: 0.92rem; min-width: 86px; text-align: center; }

    /* Animaciones */
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

    /* Responsive */
    @media (max-width: 768px) {
      .slide-content { padding: 24px; width: 94%; height: 90%; }
      .key-benefits { grid-template-columns: 1fr; }
      .nav-dots { max-width: 55vw; }
    }

    /* Estilos específicos para el slide Prompts (#slide-9) para reducir espaciado */
    #slide-9 .slide-title {
      margin-bottom: 0 !important;
    }

    #slide-9 .key-benefits {
        margin-bottom: 0.5rem !important;
        margin-top: 0;
    }

    #slide-9 .benefit h4 {
      margin: 0 0 15px 0 !important;
      font-size: clamp(1rem, 1.8vw, 1.2rem) !important;
      line-height: 1.3 !important;
      text-align: center !important;
    }

    #slide-9 .benefit p {
      margin: 0 0 18px 0 !important;
      font-size: clamp(0.85rem, 1.1vw, 1rem) !important;
      line-height: 1.4 !important;
      text-align: left !important;
    }

    /* Estilos específicos para el slide Tools (#slide-11) para reducir espaciado */
    #slide-11 .benefit h4 {
      margin: 0 0 7px 0 !important;
      font-size: clamp(1rem, 1.8vw, 1.2rem) !important;
      line-height: 1.2 !important;
      text-align: center !important;
    }

    #slide-11 .benefit p {
      margin: 0 0 10px 0 !important;
      font-size: clamp(0.85rem, 1.1vw, 1rem) !important;
      line-height: 1.3 !important;
      text-align: left !important;
    }

    #slide-11 .benefit p:last-child {
      margin-bottom: 0 !important;
    }

    #slide-11 .benefit {
      padding: 7px 10px !important;
      gap: 0 !important;
      align-items: flex-start !important;
    }

    #slide-11 .key-benefits {
      gap: 7px !important;
      margin-top: 10px !important;
    }

    #slide-11 .definition-section {
      gap: 10px !important;
    }

    #slide-11 .main-definition h3 {
      margin: 0 0 7px 0 !important;
    }

    #slide-11 .main-definition .big-text {
      margin: 0 0 5px 0 !important;
    }

    /* Estilos específicos para el slide Resources (#slide-10) para reducir espaciado */
    #slide-10 .benefit h4 {
      margin: 0 0 10px 0 !important;
      font-size: clamp(1rem, 1.8vw, 1.2rem) !important;
      line-height: 1.2 !important;
      text-align: center !important;
    }

    #slide-10 .benefit p {
      margin: 0 0 12px 0 !important;
      font-size: clamp(0.85rem, 1.1vw, 1rem) !important;
      line-height: 1.3 !important;
      text-align: left !important;
    }

    #slide-10 .benefit p:last-child {
      margin-bottom: 0 !important;
    }

    #slide-10 .benefit {
      padding: 10px 12px !important;
      gap: 0 !important;
      align-items: flex-start !important;
    }

    #slide-10 .key-benefits {
      gap: 10px !important;
      margin-top: 1rem !important;
    }

    #slide-10 .definition-section {
      gap: 5rem !important;
    }

    #slide-10 .main-definition h3 {
      margin: 0 0 10px 0 !important;
      font-size: clamp(1.1rem, 2vw, 1.4rem) !important;
    }

    #slide-10 .main-definition .big-text {
      margin: 0 0 8px 0 !important;
    }

    /* Estilos específicos para el slide 15: Fuentes y Recursos */
    #slide-14 .benefit p a {
      color: white !important;
      font-weight: bold !important;
      text-decoration: none !important;
    }

    #slide-14 .benefit p a:hover {
      text-decoration: underline;
    }
    #schema-uri-standard{
        padding-top: 4rem;
    }
    #personalized-schemas{
        padding-top: 2rem;
        padding-left: 8%;
    }

    /* Estilos específicos para el slide Tools (#slide-12) para reducir espaciado */
    #slide-12 .benefit h4 {
      margin: 0 0 5px 0 !important;
      font-size: clamp(1rem, 1.8vw, 1.2rem) !important;
      line-height: 1.2 !important;
      text-align: center !important;
    }

    #slide-12 .benefit p {
      margin: 0 0 8px 0 !important;
      font-size: clamp(0.85rem, 1.1vw, 1rem) !important;
      line-height: 1.3 !important;
      text-align: left !important;
    }

    #slide-12 .benefit p:last-child {
      margin-bottom: 0 !important;
    }

    #slide-12 .benefit {
      padding: 8px 10px !important;
      gap: 0 !important;
      align-items: flex-start !important;
    }

    #slide-12 .key-benefits {
      gap: 8px !important;
      margin-top: 8px !important;
    }

    #slide-12 .definition-section {
      gap: 8px !important;
    }

    #slide-12 .main-definition h3 {
      margin: 0 0 8px 0 !important;
    }

    #slide-12 .main-definition .big-text {
      margin: 0 0 5px 0 !important;
    }

    #slide-12 .slide-title {
      margin-bottom: 8px !important;
    }

    /* Estilos específicos para el slide 15: Fuentes y Recursos */
    #slide-15 .benefit p a {
      color: white !important;
      font-weight: bold !important;
      text-decoration: none !important;
    }

    #slide-15 .benefit p a:hover {
      text-decoration: none !important;
    }

    /* New class for last slide background effect */
    .presentation-container.last-slide-active::before {
      opacity: 1 !important;
      transition: opacity 2s ease-in !important;
    }
  </style>
</head>
<body>
  <div class="presentation-container">
    <div class="slide-wrapper" id="slideWrapper">
      <div class="slide-content" id="slideContent">
        <!-- Slide 1: Portada -->
        <div class="slide portada active" id="slide-0">
          <div class="hero-section">
            <h1 class="main-title"><span class="highlight-text">Model Context Protocol</span></h1>
            <h2 class="subtitle">(MCP)</h2>
            <div class="tagline">
              <p>Conectando IA con el mundo real a través de un <span class="highlighter">protocolo estándar abierto</span></p>
            </div>
            <div class="author-info"><p>G2K Geek Technology Solution • Agosto 2025</p></div>
          </div>
        </div>

        <!-- Slide 2: ¿Qué es MCP? -->
        <div class="slide que-es-mcp" id="slide-1">
          <h1 class="slide-title">¿Qué es MCP?</h1>
          <div class="definition-section">
            <div class="main-definition">
              <p class="big-text">El <span class="highlighter">Model Context Protocol (MCP)</span> es un estándar abierto desarrollado por Anthropic que proporciona una forma estandarizada para que los LLMs se conecten con fuentes de datos externas y herramientas.</p>
              <p class="big-text">Esencialmente, es un <span class="highlighter">"USB-C"</span> para aplicaciones de IA.</p>
            </div>
            <div class="key-benefits">
              <div class="benefit"><div class="benefit-icon">🔗</div><div class="benefit-text"><h3>Conexiones Universales</h3><p>Un solo protocolo para todas las fuentes de datos</p></div></div>
              <div class="benefit"><div class="benefit-icon">🛡️</div><div class="benefit-text"><h3>Seguridad Integrada</h3><p>Conexiones seguras y controladas por defecto</p></div></div>
              <div class="benefit"><div class="benefit-icon">⚡</div><div class="benefit-text"><h3>Escalabilidad</h3><p>Arquitectura sostenible y extensible</p></div></div>
            </div>
            <div class="main-definition">
              <p class="big-text" style="color:#A4A4A4;">Introducido en noviembre 2024 como marco de código abierto para estandarizar la integración entre sistemas de IA y herramientas externas.</p>
            </div>
          </div>
        </div>

        <!-- Slide 3: Definición Técnica MCP -->
        <div class="slide definicion-tecnica-mcp" id="slide-2">
          <h1 class="slide-title">¿Cómo se define el Model Context Protocol?</h1>
          <div class="definition-section">
            <div class="main-definition">
              <p class="big-text">El Model Context Protocol (MCP) define un protocolo abierto y versionado para conectar aplicaciones de modelos de lenguaje extenso (LLM) con fuentes de datos externas, prompts y herramientas ejecutables.</p>
              <p class="big-text">El protocolo está basado libremente en <span class="highlighter">JSON-RPC 2.0</span> y se construye sobre las lecciones aprendidas del Language Server Protocol.</p>
              <p class="big-text">Los hosts (aplicaciones LLM) crean clientes que se conectan a servidores que exponen contexto (recursos, prompts) y funcionalidad (herramientas). Las conexiones son con estado; ambos lados negocian capacidades soportadas durante la inicialización y se comunican usando mensajes JSON estructurados.</p>
            </div>
            <div class="main-definition">
              <h3 style="color: var(--accent);">Características Principales del Protocolo</h3>
              <div class="key-benefits">
                <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                  <h4>Integración Componible</h4>
                  <p>Los hosts pueden combinar múltiples servidores que exponen prompts, recursos o herramientas usando un protocolo compartido. Un mecanismo de negociación de capacidades permite al cliente y servidor acordar características soportadas.</p>
                </div>
                <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                  <h4>Mensajería Estructurada</h4>
                  <p>Las peticiones, respuestas y notificaciones siguen las reglas de JSON-RPC 2.0 (identificadores únicos para peticiones, sin ID en notificaciones). Un campo _meta está reservado para metadatos.</p>
                </div>
                <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                  <h4>Sesiones con Estado</h4>
                  <p>Los clientes mantienen una sesión por servidor. Los mensajes de ciclo de vida controlan la inicialización, operación y cierre del sistema.</p>
                </div>
                <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                  <h4>Seguridad y Confianza</h4>
                  <p>Los usuarios deben aprobar explícitamente el acceso a datos e invocación de herramientas; los servidores no pueden ver prompts completos (el host media). El protocolo enfatiza autorización basada en OAuth y manejo cuidadoso de tokens de acceso.</p>
                </div>
              </div>
            </div>
            <div class="main-definition"><p class="big-text" style="color:#A4A4A4;">MCP permite integraciones componibles sin exponer datos de usuario o claves API, reforzando la confianza y seguridad mediante consentimiento y negociación de capacidades.</p></div>
          </div>
        </div>

        <!-- Slide 4: Casos de Usos Prácticos (1) -->
        <div class="slide problemas-mcp" id="slide-3">
          <h1 class="slide-title">Casos de Usos Prácticos</h1>
          <div class="content-grid">
            <div class="problem-point">
              <h4>1. El Asistente Personal Empresarial Multi-Sistema</h4>
              <p><span class="highlight-text"><b>ANTES</b></span>Una empresa necesita un agente AI que funcione como asistente ejecutivo integrado. El agente debe monitorear calendarios de Google Workspace, filtrar emails importantes de Outlook, extraer información de documentos en SharePoint, consultar datos de CRM en Salesforce, actualizar tickets en Jira, y generar reportes en Power BI. Cada integración requiere diferentes protocolos de autenticación (OAuth 2.0, API keys, SAML), distintos formatos de datos (JSON, XML, CSV), y múltiples sistemas de rate limiting. La empresa debe mantener 6 conectores personalizados, cada uno con su propia lógica de error handling, retry mechanisms, y data transformation layers. Cuando Microsoft actualiza su Graph API o Salesforce modifica su REST endpoints, el sistema completo se desestabiliza.</p>
              <p><span class="highlight-text"><b>CON MCP</b></span>Un protocolo único estandariza toda la comunicación mediante JSON-RPC 2.0. Cada servicio (Google, Microsoft, Salesforce, Atlassian) expone un servidor MCP que maneja internamente sus especificidades técnicas. El agente utiliza un solo cliente MCP que puede interactuar uniformemente con todos los servicios. Los cambios en APIs individuales se absorben a nivel del servidor MCP correspondiente, sin afectar la lógica principal del agente. La empresa reduce el overhead de mantenimiento de múltiples integraciones a una sola interfaz estándar.</p>
            </div>
          </div>
        </div>

        <!-- Slide 5: Caso 2 -->
        <div class="slide problemas-mcp part-2" id="slide-4">
          <h1 class="slide-title">Casos de Usos Prácticos</h1>
          <div class="content-grid">
            <div class="problem-point">
              <h4>2. La Startup SaaS Construyendo Ecosistema AI</h4>
              <p><span class="highlight-text"><b>ANTES</b></span>Una plataforma de business intelligence quiere permitir que usuarios integren sus dashboards con múltiples agentes AI del mercado. Deben crear SDKs específicos para la API de OpenAI GPT-4, conectores nativos para Claude de Anthropic, adaptadores para Gemini de Google, integraciones con Cohere, y wrappers para modelos open-source como Llama. Cada plataforma AI tiene diferentes esquemas de function calling, distintos formatos de tool descriptions, variados sistemas de streaming responses, y protocolos de authentication únicos. La startup debe mantener equipos especializados para cada integración, documentación fragmentada, y ciclos de testing independientes. Cuando aparece un nuevo player en el mercado AI, requieren meses de desarrollo para crear una nueva integración desde cero.</p>
              <p><span class="highlight-text"><b>CON MCP</b></span>La startup desarrolla un único servidor MCP que expone sus funcionalidades de business intelligence. Cualquier aplicación AI que soporte el protocolo MCP puede conectarse automáticamente sin desarrollo adicional. Los nuevos agentes AI que adopten MCP se integran instantáneamente. La empresa puede enfocarse en mejorar su producto core en lugar de mantener múltiples interfaces técnicas. El ecosistema crece orgánicamente conforme más agentes adoptan el estándar MCP.</p>
            </div>
          </div>
        </div>

        <!-- Slide 6: Caso 3 -->
        <div class="slide problemas-mcp part-3" id="slide-5">
          <h1 class="slide-title">Casos de Usos Prácticos</h1>
          <div class="content-grid">
            <div class="problem-point">
              <h4>3. El Pipeline de Análisis de Datos Multi-Fuente</h4>
              <p><span class="highlight-text"><b>ANTES</b></span>Un agente de data science debe ejecutar workflows complejos que involucran múltiples sistemas heterogéneos. El proceso típico incluye: extraer datos de APIs REST con paginación compleja, procesar archivos Excel con macros y fórmulas, ejecutar queries SQL parametrizadas contra PostgreSQL con connection pooling, invocar modelos de machine learning en endpoints TensorFlow Serving, generar visualizaciones usando librerías Python específicas, y distribuir resultados vía Slack webhooks con rich formatting. Cada etapa requiere diferentes bibliotecas, manejo específico de errores, transformaciones de datos ad-hoc, y mecanismos de recovery únicos. El sistema es frágil porque una falla en cualquier paso requiere debugging manual de múltiples interfaces incompatibles. Scaling horizontalmente implica replicar toda la complejidad de integración.</p>
              <p><span class="highlight-text"><b>CON MCP</b></span>Cada fuente de datos y herramienta expone un servidor MCP estándar. El agente orchestrator utiliza un cliente MCP uniforme que abstrae las complejidades específicas de cada sistema. Los servers MCP manejan internamente aspectos como connection pooling, retry logic, data serialization, y error recovery. El workflow se convierte en una secuencia de llamadas MCP estandarizadas con consistent error handling y logging. La observabilidad mejora porque todos los sistemas hablan el mismo protocolo. Scaling se simplifica porque la complejidad está encapsulada en cada servidor MCP independiente.</p>
            </div>
          </div>
        </div>

        <!-- Slide 7: Arquitectura MCP -->
        <div class="slide arquitectura-mcp" id="slide-6">
          <h1 class="slide-title" style="margin-bottom: 0;">Arquitectura MCP</h1>
          <div class="content-grid" style="margin-top: 0; margin-bottom: 0; padding-bottom: 0; padding-top: 0;">
            <div class="problem-point">
              <h3>Componentes Principales</h3>
              <p>La arquitectura MCP se basa en tres componentes fundamentales que trabajan en conjunto para crear un ecosistema de comunicación estándar.</p>
              <h4>Roles del Sistema</h4>
              <p><span class="highlight-text"><b>Host</b></span> Coordina todo el sistema, gestiona sesiones, aplica seguridad y obtiene autorización del usuario. Crea clientes y puede integrar múltiples servidores. Los Hosts controlan qué prompts/resources/tools están disponibles para el LLM.</p>
              <p><span class="highlight-text"><b>Client</b></span> Creado por el host. Cada cliente se conecta exactamente a un servidor, negocia capacidades, mantiene el estado de la sesión, maneja suscripciones y aísla mensajes para ese servidor específico.</p>
              <p><span class="highlight-text"><b>Server</b></span> Expone prompts, resources y tools. Los servidores solicitan sampling o elicitation vía el cliente; deben respetar restricciones de seguridad y no pueden inspeccionar toda la conversación.</p>
              <h4>Negociación de Capacidades</h4>
              <p>Durante la fase de initialize, clientes y servidores declaran qué features soportan. Los clientes pueden declarar capacidades como roots, sampling, elicitation o experimental capabilities, mientras que los servidores pueden declarar prompts, resources, tools, completions o logging.</p>
              <p>Cada capability puede tener sub-opciones (como listChanged o subscribe). Ambas partes deben usar únicamente las features que fueron negociadas exitosamente.</p>
            </div>
          </div>
        </div>

        <!-- Slide 8: Ciclo de Vida MCP -->
        <div class="slide servidores-mcp" id="slide-7">
          <h1 class="slide-title">Ciclo de Vida de la Comunicación</h1>
          <div style="display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 3rem; align-items: start; margin-top: 2rem;">
            <div class="problem-point">
              <h3>Lifecycle</h3>
              <p>El ciclo de vida de la conexión tiene tres fases:</p>
              <div style="margin: 1.2rem 0;">
                <h4 class="highlight-text">Inicialización</h4>
                <p>El cliente envía una petición initialize conteniendo su versión de protocolo soportada y capacidades. El servidor responde con su propia versión y capacidades. Hasta que el cliente envíe una notificación initialized, el servidor no debe enviar peticiones excepto ping y notifications/message.</p>
              </div>
              <div style="margin: 1.2rem 0;">
                <h4 class="highlight-text">Operación</h4>
                <p>Ambas partes intercambian requests, responses y notifications usando únicamente la versión de protocolo y capacidades negociadas.</p>
              </div>
              <div style="margin: 1.2rem 0;">
                <h4 class="highlight-text">Shutdown</h4>
                <p>El cliente termina la sesión. Para transportes stdio, el cliente debe cerrar streams y enviar señales apropiadas; para transportes HTTP, puede cerrar la conexión o enviar un HTTP DELETE.</p>
              </div>
              <p style="font-size: var(--p-sm); color: #888;">Los timeouts y errores son parte del lifecycle. Las implementaciones deben establecer timeouts de request, reiniciarlos cuando se reciben notifications de progreso y manejar versiones de protocolo no coincidentes o fallos de negociación de capacidades cerrando la conexión.</p>
            </div>
            <div class="diagram-container">
              <img src="images/workflow_diagram.svg" alt="MCP Communication Workflow" />
            </div>
          </div>
        </div>

        <!-- Slide 9: Server Features -->
        <div class="slide clientes-mcp" id="slide-8">
          <h1 class="slide-title">Server Features - Características del Servidor</h1>
          <div class="definition-section">
            <div class="main-definition">
              <h3>Overview General</h3>
              <p class="big-text">Las Server Features proporcionan el contexto y funcionalidad utilizados por los hosts. Existen cuatro primitivas fundamentales:</p>
            </div>
            <div class="key-benefits">
              <div class="benefit">
                <h4>Prompts</h4>
                <p>Plantillas pre-definidas o instrucciones que guían las interacciones con LLM.</p>
              </div>
              <div class="benefit">
                <h4>Roots</h4>
                <p>Definen los límites del sistema de archivos donde los servidores pueden operar, especificando directorios y archivos accesibles.</p>
              </div>
              <div class="benefit">
                <h4>Resources</h4>
                <p>Datos estructurados o contenido que proporciona contexto (archivos, esquemas de base de datos, etc.).</p>
              </div>
              <div class="benefit">
                <h4>Tools</h4>
                <p>Funciones ejecutables que permiten a los modelos realizar acciones o obtener información.</p>
              </div>
            </div>
            <div class="main-definition">
              <p class="big-text">Estas primitivas siguen una jerarquía de control: los <span class="highlighter">prompts son user-controlled</span>, los <span class="highlighter">roots definen boundaries</span>, los <span class="highlighter">resources son application-controlled</span> y los <span class="highlighter">tools son model-controlled</span>.</p>
            </div>
          </div>
        </div>

        <!-- Slide 10: Prompts -->
        <div class="slide transporte-mcp" id="slide-9">
          <h1 class="slide-title">Prompts</h1>
          <div class="definition-section">
            <div class="main-definition">
              <h3>Definición y Propósito</h3>
              <p class="big-text">Los prompts permiten que los servidores expongan plantillas de mensajes que los usuarios pueden elegir. Los clientes descubren prompts disponibles vía <span class="highlighter">prompts/list</span>, obtienen prompts específicos vía <span class="highlighter">prompts/get</span> y reciben actualizaciones vía <span class="highlighter">notifications/prompts/list_changed</span>.</p>
            </div>
            <div class="key-benefits">
              <div class="benefit">
                <h4>Capabilities</h4>
                <p>Los servidores que soportan prompts declaran la capability prompts y pueden indicar si soportan notificaciones listChanged.</p>
              </div>
              <div class="benefit">
                <h4>Operaciones Principales</h4>
                <p><strong>Listing</strong> – los clientes envían prompts/list (soporta paginación). La respuesta contiene un array de prompts con campos name, title, description y una lista opcional de arguments.</p>
                <p><strong>Getting</strong> – para recuperar un prompt, los clientes llaman prompts/get con el nombre del prompt y valores de argumentos. El servidor retorna una descripción y un array de mensajes con roles (user o assistant) y content.</p>
                <p><strong>List change notification</strong> – los servidores emiten notifications/prompts/list_changed cuando la lista de prompts cambia.</p>
              </div>
              <div class="benefit">
                <h4>Estructura de Datos</h4>
                <p>Un Prompt incluye:</p>
                <p><strong>name</strong> – identificador único</p>
                <p><strong>title</strong> – nombre legible opcional</p>
                <p><strong>description</strong> – descripción opcional</p>
                <p><strong>arguments</strong> – lista opcional de definiciones de parámetros</p>
              </div>
            </div>
            <div class="main-definition">
              <p class="big-text">Los mensajes de prompt contienen un <span class="highlighter">role</span> (user o assistant) y <span class="highlighter">content</span> que puede ser texto, imagen o audio. También pueden incluirse recursos embebidos.</p>
            </div>
          </div>
        </div>

        <!-- Slide 11: Roots -->
        <div class="slide transporte-mcp" id="slide-10">
          <h1 class="slide-title" style="margin-bottom: 0">Roots</h1>
          <div class="definition-section">
            <div class="main-definition">
              <h3>Definición y Propósito</h3>
              <p class="big-text">Los roots definen los límites del sistema de archivos donde los servidores pueden operar. Permiten especificar qué <span class="highlighter">directorios y archivos</span> están accesibles, usando URIs <span class="highlighter">file://</span> únicos.</p>
            </div>
            <div class="key-benefits" style="margin-bottom: 0;">
              <div class="benefit">
                <h4>Capabilities</h4>
                <p>Los clientes que soportan roots DEBEN declarar la capability roots y pueden indicar si soportan listChanged para notificaciones cuando la lista cambia.</p>
              </div>
              <div class="benefit">
                <h4>Operaciones Principales</h4>
                <p><strong>Listing</strong> – roots/list retorna un array de roots con uri (identificador único file://) y name opcional (nombre legible para visualización).</p>
                <p><strong>Notifications</strong> – notifications/roots/list_changed se envía cuando la lista de roots cambia, permitiendo que los servidores actualicen su comprensión del acceso al sistema de archivos.</p>
              </div>
              <div class="benefit">
                <h4>Estructura de Datos</h4>
                <p>Un Root incluye:</p>
                <p><strong>uri</strong> – identificador único (DEBE ser file:// URI)</p>
                <p><strong>name</strong> – nombre legible opcional para visualización</p>
              </div>
            </div>
            <div class="main-definition" id="slide-11-use-cases">
              <h3>Casos de Uso</h3>
              <p class="big-text">• <span class="highlighter">Directorios de proyecto</span> específicos</p>
              <p class="big-text">• <span class="highlighter">Múltiples repositorios</span> (frontend/backend)</p>
              <p class="big-text">• <span class="highlighter">Control de acceso</span> y seguridad</p>
            </div>
          </div>
        </div>

        <!-- Slide 12: Resources -->
        <div class="slide transporte-mcp" id="slide-11">
          <h1 class="slide-title" style="margin-bottom: 0">Resources</h1>
          <div class="definition-section">
            <div class="main-definition">
              <h3>Definición y Propósito</h3>
              <p class="big-text">Los resources permiten que los servidores expongan archivos o conjuntos de datos a los clientes. Cada resource se identifica por un <span class="highlighter">URI</span> y puede incluir name, title, description, MIME type y size.</p>
            </div>
            <div class="key-benefits" style="margin-bottom: 0;">
              <div class="benefit">
                <h4>Capabilities</h4>
                <p>Los servidores declaran la capability resources y pueden soportar subscribe (suscripciones a resources individuales) y listChanged (notificaciones cuando la lista de resources cambia).</p>
              </div>
              <div class="benefit">
                <h4>Operaciones Principales</h4>
                <p><strong>Listing</strong> – resources/list retorna una página de resources (con uri, name, title, description, mimeType) y un nextCursor opcional para paginación.</p>
                <p><strong>Reading</strong> – resources/read obtiene el contenido de un resource. La respuesta contiene una lista de bloques de contenido (texto o binario). Los bloques de texto incluyen text, mientras que los bloques binarios incluyen blob (base64) y mimeType.</p>
              </div>
              <div class="benefit">
                <h4>Resource Templates y Subscriptions</h4>
                <p>Los servidores pueden exponer resource templates usando URI templates; los clientes los listan vía resources/templates/list. Los clientes pueden suscribirse a actualizaciones de resources usando resources/subscribe y recibir notifications/resources/updated cuando un resource cambia.</p>
              </div>
            </div>
            <div class="main-definition">
              <h3 id="schema-uri-standard">Esquemas URI Estándar</h3>
              <p class="big-text text-padding"><span class="highlighter">https://</span> (recursos
                  web)</p>
              <p class="big-text text-padding"><span class="highlighter">file://</span> (sistema de
                  archivos)</p>
              <p class="big-text text-padding"><span class="highlighter">git://</span> (control de
                  versiones)</p>
              <p class="big-text" id="personalized-schemas">Esquemas personalizados deben seguir RFC 3986</p>
            </div>
          </div>
        </div>

        <!-- Slide 13: Tools (Herramientas) -->
        <div class="slide tools-mcp" id="slide-12">
          <h1 class="slide-title">Tools</h1>
          <div class="definition-section">
            <div class="main-definition">
              <h3>Definición y Propósito</h3>
              <p class="big-text">Los servers permiten que los servidores expongan funciones que el LLM puede llamar. Los tools son <span class="highlighter">model-controlled</span> pero siempre deben incluir <span class="highlighter">human-in-the-loop</span> para acciones sensibles.</p>
            </div>
            <div class="key-benefits">
              <div class="benefit">
                <h4>Capabilities</h4>
                <p>Los servidores declaran la capability tools y pueden soportar notificaciones listChanged.</p>
              </div>
              <div class="benefit">
                <h4>Operaciones Principales</h4>
                <p><strong>Listing</strong> – tools/list retorna un array de tools con campos: name, title, description e inputSchema. Se soporta paginación.</p>
                <p><strong>Calling</strong> – tools/call invoca un tool por nombre con argumentos JSON. El resultado incluye content (un array de bloques de contenido) y una flag isError.</p>
              </div>
              <div class="benefit">
                <h4>Estructura de Datos</h4>
                <p>Una definición de Tool comprende:</p>
                <p><strong>name</strong> – identificador único</p>
                <p><strong>title</strong> – nombre de visualización opcional</p>
                <p><strong>description</strong> – descripción legible</p>
                <p><strong>inputSchema</strong> – JSON Schema describiendo parámetros esperados</p>
                <p><strong>outputSchema</strong> – JSON Schema opcional describiendo salida estructurada</p>
                <p><strong>annotations</strong> – metadata opcional; los clientes deben tratarlas como no confiables a menos que el servidor sea confiable</p>
              </div>
            </div>
            <div class="key-benefits">
              <div class="benefit">
                <h4>Tipos de Resultados</h4>
                <p>Los resultados de tools pueden incluir:</p>
                <p><strong>Text content</strong> – {"type":"text", "text":"..."}</p>
                <p><strong>Image content</strong> – datos base64 con MIME type y annotations opcionales</p>
                <p><strong>Audio content</strong> – audio base64</p>
                <p><strong>Resource links</strong> – referencias a resources con sus propias annotations</p>
                <p><strong>Embedded resources</strong> – resources completos incluidos inline</p>
                <p><strong>Structured content</strong> – objetos JSON en campo structuredContent</p>
              </div>
              <div class="benefit">
                <h4>Validación</h4>
                <p>Si un tool define un outputSchema, los servidores DEBEN asegurar que los resultados se conformen a él y los clientes DEBERÍAN validar el resultado. La validación ayuda a LLMs y clientes a analizar resultados correctamente.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Slide 13: Seguridad en MCP -->
        <div class="slide seguridad-mcp" id="slide-13">
          <h1 class="slide-title">Consideraciones de Seguridad</h1>
          <div class="definition-section">
            <div class="key-benefits">
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <h4>Prompts</h4>
                <p>Validación de argumentos y sanitización de inputs para prevenir ataques de inyección.</p>
              </div>
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <h4>Resources</h4>
                <p>Validación de URIs, controles de acceso, codificación apropiada de datos binarios y verificación de permisos.</p>
              </div>
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <h4>Tools</h4>
                <p>Validación de input, controles de acceso apropiados, rate limiting, sanitización de output y confirmación del usuario para operaciones sensibles.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Slide 14: Demostración Práctica -->
        <div class="slide casos-empresariales" id="slide-14">
          <h1 class="slide-title">Demostración Práctica</h1>
        </div>

        <!-- Slide 15: Fuentes y Recursos -->
        <div class="slide ecosystem-mcp" id="slide-15">
          <h1 class="slide-title">Fuentes y Recursos</h1>
          <div class="definition-section">
            <div class="key-benefits">
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <p><a href="https://modelcontextprotocol.io" target="_blank" style="background-color: var(--accent); color: white; padding: 4px 8px; border-radius: 4px; text-decoration: none; font-weight: bold;" class="highlight-text">modelcontextprotocol.io</a></p>
              </div>
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <p><a href="https://gofastmcp.com/getting-started/welcome" target="_blank" style="background-color:
                var(--accent); color: white; padding: 4px 8px; border-radius: 4px; text-decoration: none; font-weight: bold;"
                      class="highlight-text">FastMCP</a></p>
              </div>
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <p><a href="https://github.com/aguara-guazu/news-mcp" target="_blank" style="background-color:
                var(--accent); color: white; padding: 4px 8px; border-radius: 4px; text-decoration: none; font-weight: bold;"
                      class="highlight-text">NewsMCP server</a></p>
              </div>
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <p><a href="https://github.com/aguara-guazu/mcp-workshop" target="_blank" style="background-color:
                var(--accent); color: white; padding: 4px 8px; border-radius: 4px; text-decoration: none; font-weight: bold;"
                      class="highlight-text">Presentacion</a></p>
              </div>
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <p><a href="https://about-mcp.the-prompting.club/" target="_blank" style="background-color:
                var(--accent); color: white; padding: 4px 8px; border-radius: 4px; text-decoration: none; font-weight: bold;"
                      class="highlight-text">the-prompting.club</a></p>
              </div>
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <p><a href="https://smithery.ai/" target="_blank" style="background-color:
                var(--accent); color: white; padding: 4px 8px; border-radius: 4px; text-decoration: none; font-weight: bold;"
                      class="highlight-text">smithery.ai</a></p>
              </div>
              <div class="benefit" style="flex-direction: column; align-items: flex-start;">
                <p><a href="https://dither-cam.the-prompting.club/" target="_blank" style="background-color:
                var(--accent); color: white; padding: 4px 8px; border-radius: 4px; text-decoration: none; font-weight: bold;"
                      class="highlight-text">vivecode dither cam</a></p>
              </div>
            </div>
          </div>
        </div>

        <!-- Slide 16: Conclusiones -->
        <div class="slide conclusiones" id="slide-16">
          <h1 class="slide-title">Conclusiones</h1>
          <div class="content-grid">
            <div class="problem-point">
              <h3>El Futuro de las Integraciones AI</h3>
              <p>MCP representa un cambio paradigmático hacia integraciones AI estandarizadas, simplificadas y escalables. Es el futuro de cómo la IA interactuará con el mundo digital.</p>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Navigation (los dots se generan dinámicamente) -->
    <div class="navigation">
      <div class="nav-dots" id="navDots"></div>
      <div class="nav-controls">
        <button class="nav-btn" id="prevBtn">← Anterior</button>
        <span class="slide-counter" id="slideCounter">1 / 1</span>
        <button class="nav-btn" id="nextBtn">Siguiente →</button>
        <button class="fullscreen-btn" id="fullscreenBtn">⛶</button>
      </div>
    </div>
  </div>

  <script>
    // Variables para manejo del background animado
    let gifDuration = null;
    let gifStartTime = null;
    let backgroundTransitionHandled = false;

    // Función para precargar la imagen estática y detectar duración del GIF
    function initBackgroundTransition() {
      // Precargar imagen estática
      const staticImg = new Image();
      staticImg.src = './images/bg_image1.png';

      // Crear imagen temporal para detectar duración del GIF
      const gifImg = new Image();
      gifImg.onload = function() {
        // Estimar duración del GIF basado en tamaño de archivo o usar valor por defecto
        // Como no podemos detectar la duración real del GIF fácilmente,
        // usamos un valor estimado. Puedes ajustar este valor según tu GIF específico.
        gifDuration = 8000; // 8 segundos - ajusta según tu GIF
        gifStartTime = Date.now();

        // Configurar timer para la transición
        setTimeout(() => {
          if (!backgroundTransitionHandled) {
            transitionToStaticBackground();
          }
        }, gifDuration);

        // También verificar periódicamente en caso de que el timer no sea exacto
        const checkInterval = setInterval(() => {
          if (Date.now() - gifStartTime >= gifDuration && !backgroundTransitionHandled) {
            transitionToStaticBackground();
            clearInterval(checkInterval);
          }
        }, 500);
      };

      gifImg.src = './images/bg_image1_animated.gif';
    }

    // Función para hacer la transición a la imagen estática
    function transitionToStaticBackground() {
      if (backgroundTransitionHandled) return;

      backgroundTransitionHandled = true;
      const container = document.querySelector('.presentation-container');

      // Agregar clase que activa la transición CSS
      container.classList.add('gif-ended');

      console.log('Transición a imagen estática activada');
    }

    let currentSlide = 0;
    let isAnimating = false;
    const slideWrapper = document.getElementById('slideWrapper');
    const slideContent = document.getElementById('slideContent');
    const slides = Array.from(document.querySelectorAll('.slide'));
    const navDotsContainer = document.getElementById('navDots');
    const slideCounter = document.getElementById('slideCounter');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const fullscreenBtn = document.getElementById('fullscreenBtn');

    let totalSlides = slides.length;

    // 1) Quitar estilos inline a partir de la slide 3 (índice 2) para unificar styling, excepto slide 8
    function stripInlineFrom(startIndex = 2) {
      for (let i = startIndex; i < slides.length; i++) {
        // Skip slide 8 (slide-7) to preserve its layout styles
        if (slides[i].id === 'slide-7') continue;
        slides[i].querySelectorAll('[style]')
          .forEach(el => el.removeAttribute('style'));
      }
    }

    // 2) Generar dots de navegación según cantidad real de slides
    function buildNavDots() {
      navDotsContainer.innerHTML = '';
      slides.forEach((slide, index) => {
        const dot = document.createElement('button');
        dot.className = 'nav-dot';
        const titleNode = slide.querySelector('.slide-title');
        dot.title = titleNode ? titleNode.textContent.trim() : `Slide ${index + 1}`;
        dot.addEventListener('click', () => goToSlide(index));
        navDotsContainer.appendChild(dot);
      });
    }

    function updateSlideDisplay() {
      // Ocultar todas
      slides.forEach(s => s.classList.remove('active'));
      // Mostrar actual
      const active = slides[currentSlide];
      if (active) active.classList.add('active');

      // Actualizar dots
      const dots = navDotsContainer.querySelectorAll('.nav-dot');
      dots.forEach((dot, idx) => dot.classList.toggle('active', idx === currentSlide));

      // Contador
      slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;

      // Botones
      prevBtn.disabled = currentSlide === 0;
      nextBtn.disabled = currentSlide === totalSlides - 1;

      // Ajustar escala para que quepa sin scroll
      requestAnimationFrame(() => fitActiveSlide());

      // Handle last slide background
      const container = document.querySelector('.presentation-container');
      if (currentSlide === totalSlides - 1) {
        container.classList.add('last-slide-active');
      } else {
        container.classList.remove('last-slide-active');
      }
    }

    // 3) Auto-fit: escala .slide-content para encajar en el área visible del wrapper
    function fitActiveSlide() {
      // Reset transform para medir contenido real
      slideContent.style.transform = 'none';

      const wrapperRect = slideWrapper.getBoundingClientRect();
      const contentRect = slideContent.getBoundingClientRect();

      // Cálculo de escala en ambos ejes (dejamos un pequeño padding virtual)
      const pad = 12; // px
      const scaleX = (wrapperRect.width - pad) / contentRect.width;
      const scaleY = (wrapperRect.height - pad) / contentRect.height;
      const scale = Math.min(scaleX, scaleY, 1); // nunca aumentar más de 1

      slideContent.style.transform = `scale(${scale})`;
    }

    function nextSlide() {
      if (currentSlide < totalSlides - 1 && !isAnimating) {
        isAnimating = true;
        slideWrapper.classList.add('animating');
        setTimeout(() => {
          currentSlide++;
          updateSlideDisplay();
          slideWrapper.classList.remove('animating');
          isAnimating = false;
        }, 300);
      }
    }

    function prevSlide() {
      if (currentSlide > 0 && !isAnimating) {
        isAnimating = true;
        slideWrapper.classList.add('animating');
        setTimeout(() => {
          currentSlide--;
          updateSlideDisplay();
          slideWrapper.classList.remove('animating');
          isAnimating = false;
        }, 300);
      }
    }

    function goToSlide(index) {
      if (index !== currentSlide && !isAnimating && index >= 0 && index < totalSlides) {
        isAnimating = true;
        slideWrapper.classList.add('animating');
        setTimeout(() => {
          currentSlide = index;
          updateSlideDisplay();
          slideWrapper.classList.remove('animating');
          isAnimating = false;
        }, 300);
      }
    }

    function toggleFullscreen() {
      const elem = document.documentElement;
      const isFs = document.fullscreenElement || document.webkitFullscreenElement;
      if (isFs) {
        if (document.exitFullscreen) document.exitFullscreen();
        else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
      } else {
        if (elem.requestFullscreen) elem.requestFullscreen();
        else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
      }
      // Recalcular fit tras entrar/salir de FS
      setTimeout(fitActiveSlide, 50);
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
      else if (e.key === 'ArrowLeft') { e.preventDefault(); prevSlide(); }
      else if ((e.key === 'f' || e.key === 'F') && (e.ctrlKey || e.metaKey)) { e.preventDefault(); toggleFullscreen(); }
    });

    // Botones
    prevBtn.addEventListener('click', prevSlide);
    nextBtn.addEventListener('click', nextSlide);
    fullscreenBtn.addEventListener('click', toggleFullscreen);

    // Init
    stripInlineFrom(2);           // limpia estilos inline desde la slide 3
    buildNavDots();               // asegura consistencia con el número real de slides
    totalSlides = slides.length;  // (por si en el futuro agregas o quitas)
    updateSlideDisplay();         // muestra y ajusta escala

    // Re-ajustar en resize/orientación
    let resizeRaf;
    window.addEventListener('resize', () => {
      cancelAnimationFrame(resizeRaf);
      resizeRaf = requestAnimationFrame(fitActiveSlide);
    });
    window.addEventListener('orientationchange', () => setTimeout(fitActiveSlide, 100));

    // Iniciar transición de fondo
    initBackgroundTransition();
  </script>
</body>
</html>
